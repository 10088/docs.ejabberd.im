<!DOCTYPE html>
<html lang="en">
<head>    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <title>Using notification sounds on iOS and Android</title>
    <link rel="shortcut icon" href="/favicon.png">
    <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Boxcar Developer Blog Feed" />
    
    <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/shared/css/pygments.css" rel="stylesheet" type="text/css" />
    <link href="/shared/css/docs.style.css" rel="stylesheet" type="text/css" />
</head>
<body class="api  blog single">

<div id="header-wrapper">
    <div id="header" class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <a id="logo" href="/">ejabberd Docs</a>
                
                <menu>
                    <li><a href="#">Forums</a></li>
                    <li><a href="/">Documentation</a></li>
                </menu>
            </div>
        </div>
    </div><!-- #header -->
</div><!-- #header-wrapper -->

<div id="wrapper" class="container-fluid">
    <div class="row">
        <div id="sidebar" class="col-md-4">
            
            <div id="js-sidebar" class="sidebar-shell">
                 <div class="js-toggle-list sidebar-module expandable">
                     <ul>
                         <li class="js-topic"><a href="/">Home</a></li>
                         <li class="js-topic">
                             <a href="/sdk/">SDK</a>
                             <ul class="js-guides">
                                 <li>
                                     <a href="/sdk/android/">Android</a>
                                     <ul>
                                       <li><a href="/sdk/android/2.0/">SDK v2.*</a></li>
                                       <li><a href="/sdk/android/1.0/">SDK v1.*</a></li>
                                     </ul>
                                 </li>
                                 <li>
                                     <a href="/sdk/ios/">iOS</a>
                                     <ul>
                                         <li><a href="/sdk/ios/1.x/">SDK v1.1 (stable)</a></li>
                                         <li><a href="/sdk/ios/2.x/">SDK v2.0 beta (experimental)</a></li>
                                         <li><a href="/sdk/ios/apple-push-certificates/">Apple Push Certificates</a></li>
                                     </ul>
                                 </li>
                                 <li><a href="/sdk/amazon/">Kindle Fire</a></li>
                                 <li><a href="/sdk/nokia/">Nokia X</a></li>
                                 <li><a href="/sdk/phonegap/">Phonegap</a></li>
                             </ul>
                         </li>
                         <li class="js-topic">
                             <a href="/console/">Console</a>
                             <ul class="js-guides">
                                 <li><a href="/console/project_settings/">Project Settings</a></li>
                             </ul>
                         </li>
                         <li class="js-topic">
                             <a href="/api/">API</a>
                             <ul class="js-guides">
                                 <li><a href="/api/publisher/">Publisher</a></li>
                             </ul>
                         </li>
                     </ul>
                 </div> <!-- /sidebar-module -->
             </div><!-- /sidebar-shell -->
            
        </div>
        <div id="content" class="col-md-8">
        
            
            <div class="read-more"><a href="/blog/">&lsaquo; Blog</a></div>
            
            <br /><br />
            
            <ul class="meta on-blog">
              <li class="published">
                <span class="octicon octicon-calendar"></span>
                October 8, 2014
                
              </li>
              <li class="who_when">
                <img height="20" width="20" src="https://secure.gravatar.com/avatar/a86897320f9fcda11c8ce08b3e3489f4?s=20&d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png" />
                  <a href="https://github.com/mremond">mremond</a>
              </li>
            </ul>
           
            <h2 class="title on-blog">Using notification sounds on iOS and Android</h2>
            
        
            
<p>When implementing a push solution it is critical to think about all the small details that will make your app be more
usable and stand out.</p>

<p>We have often seen that customizing notification sound for iOS or Android apps is often simply ignored.
When this happen, the application will use the default sound, which is often the same than the sound of SMS received.</p>

<p>For your users, this is a great cause of confusion that lead to action to solve their issue:</p>

<ul>
  <li>They may disable sound just because they cannot know if this the alert they just had is a
sound coming from your app or is a new message.</li>
  <li>They may disable push totally, removing potentially important features to your application.</li>
  <li>They may also decide that your app is annoying and uninstall the application.</li>
</ul>

<p>This article will help you implement custom sound for push notification in your application.</p>

<!-- more -->

<h2 id="implementing-custom-push-notification-sounds-on-ios">Implementing custom push notification sounds on iOS</h2>

<p>Implementing custom sound on iOS is often documented, but it is always good to remember the basics. </p>

<h3 id="preparing-the-sound-file">Preparing the sound file</h3>

<p>Remember that the default sound is played when:</p>

<ul>
  <li>The sound file is not found</li>
  <li>The sound file is invalid. This is the case for example if the sound you are trying to play is longer than 30 seconds.<br>
 The file is also invalid if it is not in one of the expected extension: aiff, caf or wav.</li>
</ul>

<p>It means you need to prepare a sound valid file to be able to play a sound different from the default.</p>

<p>For more details on how to prepare a custom sound for iOS, you can read Apple documentation: <a href="https://developer.apple.com/library/IOs/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW6">Preparing Custom Alert Sounds</a></p>

<h3 id="adding-the-sound-in-ios-application-bundle">Adding the sound in iOS application bundle</h3>

<p>iOS can only play a sound that is packaged and delivered in the App Store build. There is no way to download a sound from
the network at runtime or to update the sound list after the app has been released. You cannot download a sound from your app to play it when receiving a notification.</p>

<p>This makes it another good reason to address the sound question from the beginning, as it cannot be added without getting
a new version of the application approved by Apple.</p>

<p>To implement push in you application:</p>

<ul>
  <li>Add the sound file to your project, for example by dragging it to your resource folder. Make sure you check the box to copy it there to
 commit it in your repository. Here, adding <em>pulses.wav</em>:
<img src="/images/ios/xcode_sound_1.png" alt="">
</li>
  <li>Check that the sound file is properly added to your bundle resources during build phase. Here <em>pulses.wav</em>:
<img src="/images/ios/xcode_sound_2.png" alt="">
</li>
  <li>Rebuild you application</li>
</ul>

<p>That should be enough to allow you to play a custom sound on a notification.</p>

<h2 id="implementing-custom-push-notification-sounds-on-android">Implementing custom push notification sounds on Android</h2>

<h3 id="preparing-sound-file">Preparing sound file</h3>

<p>As for iOS, you need to embed the sound file in the Android application package to be able to play that sound when receiving a notification.</p>

<p>Here are a few things to be careful about when preparing Android sound file:</p>

<ul>
  <li>Android does not support sound files that are not valid Java identifier. It means that your sound file cannot be named ‘1.caf’ for example.
 Android build process map resources to class properties in the Resource class (<em>R.class</em>) or any of its inner classes, like <em>R.color</em>, <em>R.layout</em>, <em>R.string</em>, <em>R.raw</em>, etc. As <em>R.raw.1</em> is not not a valid property 1.caf will not be a valid
 name for sound file.</li>
  <li>Android supports different formats than iOS. We recommend for example, you use linear PCM Wave file with .wav extension.
 It should then work fine on both systems.</li>
</ul>

<h3 id="packaging-the-sound-and-playing-it-with-boxcar-android-sdk">Packaging the sound and playing it with Boxcar Android SDK</h3>

<p>On Android, Google Cloud Message (GCM) is used to deliver the alert to the device. Then, as a developer, it is up to you
to prepare the notification to display, play sound, etc.</p>

<p>That’s where the Boxcar SDK play an important role. We offer the option to do the right thing on your behalf, making push
notification a pleasure on Android. </p>

<p>In Boxcar Android SDK, we made the default behaviour work the same as iOS so that regarding push sound, you can offer a consistent
behaviour to your users, no matter which version they use.</p>

<p>When a push arrives, the SDK checks the payload content to know if it should play a sound when the notification is sent
to the Android Notification center. The following rule is followed by the SDK:</p>

<ul>
  <li>if the payload doesn’t define a sound file to play, it doesn’t play any sound (silent push)</li>
  <li>if the payload defines a sound file that can’t be found on the application, it plays the default system sound</li>
  <li>otherwise, it plays the sound defined in the payload</li>
</ul>

<p>As we will see further, the push data can contain a reference to a sound file to play.
The idea is that you application can have multiple sounds, one for urgent notifications, another for normal content, etc.
In that case, the person that publishes the push just tells what is the sound that should be played when the message arrives at the user’s device.</p>

<p>Every custom sound file needed (any other than the system’s default) should be packaged along with the mobile application.
You should simply put the sound file under <em>res/raw</em> folder of your project. If an incoming push tells to play ‘beep’ sound,
then the SDK will locate a sound resource with that name in the generated <em>R.raw</em> inner class, which maps to a file on res/raw folder (for example <em>R.raw.beep</em> resource identifier refers to <em>‘res/raw/beep.wav’</em> file) and plays it.
If the file can’t be located, the system’s default is played instead.</p>

<p>That should be it !</p>

<p>Please, refer to our Boxcar Android SDK documentation for more details: <a href="http://developer.boxcar.io/sdk/android/#configuring-the-sound-to-play-on-incoming-notifications">Configuring the sound to play on incoming notifications</a> </p>

<h2 id="sending-push-notification-with-custom-sound-with-boxcar-developer-push">Sending push notification with custom sound with Boxcar Developer Push</h2>

<h3 id="defining-sound-to-play-from-boxcar-push-console">Defining sound to play from Boxcar Push Console</h3>

<p>All you have to do is put the file name of the sound you want to play in the form:</p>

<p><img src="/images/console/console_sound_1.png" alt=""></p>

<p>This will work both on iOS and Android devices.</p>

<h3 id="defining-sound-to-play-from-boxcar-publisher-api">Defining sound to play from Boxcar Publisher API</h3>

<p>When sending a JSON payload to trigger a push through the publisher API, all you have to do is to include a sound name in
in the aps section:</p>

<p><code>
{
 "aps":{"badge":"auto",
        "alert":"alert message",
        "sound":"pulses.wav"},
 "id":"JHQRKHEE"
}
</code></p>

<p>This will work on iOS and Android devices and trigger a sound on both platform. </p>

<h2 id="questions-">Questions ?</h2>

<p>We are just scratching the surface of what you can do with Boxcar Developer Push and Boxcar SDK.
We will keep on writing new articles that show and compare how to implement the same feature on both iOS and Android.</p>

<p>If you have questions on this article or on other push notification topics, feel free to get in touch on
<a href="https://boxcar-api.uservoice.com">Boxcar API Uservoice</a>.</p>

<p>Enjoy !</p>


            
            <div id="disqus_thread"></div>
        </div>
    </div>
</div><!-- #wrapper -->

<div id="footer-wrapper">
    <div id="footer" class="container-fluid">
        <div class="row">
            <div class="col-md-7">
                <ul class="sitemap">
                    <li><a href="#">Section</a></li>
                    <li><a href="#">Element</a></li>
                    <li><a href="#">Element</a></li>
                </ul>
                
                <ul class="sitemap">
                    <li><a href="#">Section</a></li>
                    <li><a href="#">Element</a></li>
                    <li><a href="#">Element</a></li>
                </ul>
                
                <ul class="sitemap">
                    <li><a href="#">Section</a></li>
                    <li><a href="#">Element</a></li>
                    <li><a href="#">Element</a></li>
                </ul>
            </div>
            <div class="col-md-5 text-right">
                <a href="http://ejabberd.im" id="logo-footer">ejabberd.im</a>
                <br /><br />
                &copy; 2014-2015 <a href="#">ProcessOne</a>
            </div>
        </div>
    </div>
</div><!-- /#footer -->

<script src="/shared/js/jquery.js" type="text/javascript"></script>
<script src="/shared/js/documentation.js" type="text/javascript"></script>

<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  if (!$('body').hasClass('nocomment')) {
    var disqus_shortname = 'developerboxcario';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  }
</script>

<script>
  // Include the UserVoice JavaScript SDK (only needed once on a page)
  UserVoice=window.UserVoice||[];(function(){var uv=document.createElement('script');uv.type='text/javascript';uv.async=true;uv.src='//widget.uservoice.com/Z2g8b0cwtaG7oeunGhyDHw.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(uv,s)})();
  
  UserVoice.push(['set', {
    accent_color: '#e23a39',
    trigger_color: 'white',
    trigger_background_color: '#e23a39'
  }]);
  
  // Add default trigger to the bottom-right corner of the window:
  UserVoice.push(['addTrigger', { mode: 'contact', trigger_position: 'bottom-right' }]);
</script>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-137362-14', 'boxcar.io');
    ga('send', 'pageview');
</script>
</body>
</html>
