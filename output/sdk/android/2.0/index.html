<!DOCTYPE html>
<html lang="en">
<head>    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <title>Android SDK Introduction | Boxcar Push Service</title>
    <link rel="shortcut icon" href="/favicon.png">
    <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Boxcar Developer Blog Feed" />
    
    <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/shared/css/pygments.css" rel="stylesheet" type="text/css" />
    <link href="/shared/css/docs.style.css" rel="stylesheet" type="text/css" />
</head>
<body class="api  ">

<div id="header-wrapper">
    <div id="header" class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <a id="logo" href="/">ejabberd Docs</a>
                
                <menu>
                    <li><a href="#">Forums</a></li>
                    <li><a href="/">Documentation</a></li>
                </menu>
            </div>
        </div>
    </div><!-- #header -->
</div><!-- #header-wrapper -->

<div id="wrapper" class="container-fluid">
    <div class="row">
        <div id="sidebar" class="col-md-4">
            
            <div id="js-sidebar" class="sidebar-shell">
                 <div class="js-toggle-list sidebar-module expandable">
                     <ul>
                         <li class="js-topic"><a href="/">Home</a></li>
                         <li class="js-topic">
                             <a href="/sdk/">SDK</a>
                             <ul class="js-guides">
                                 <li>
                                     <a href="/sdk/android/">Android</a>
                                     <ul>
                                       <li><a href="/sdk/android/2.0/">SDK v2.*</a></li>
                                       <li><a href="/sdk/android/1.0/">SDK v1.*</a></li>
                                     </ul>
                                 </li>
                                 <li>
                                     <a href="/sdk/ios/">iOS</a>
                                     <ul>
                                         <li><a href="/sdk/ios/1.x/">SDK v1.1 (stable)</a></li>
                                         <li><a href="/sdk/ios/2.x/">SDK v2.0 beta (experimental)</a></li>
                                         <li><a href="/sdk/ios/apple-push-certificates/">Apple Push Certificates</a></li>
                                     </ul>
                                 </li>
                                 <li><a href="/sdk/amazon/">Kindle Fire</a></li>
                                 <li><a href="/sdk/nokia/">Nokia X</a></li>
                                 <li><a href="/sdk/phonegap/">Phonegap</a></li>
                             </ul>
                         </li>
                         <li class="js-topic">
                             <a href="/console/">Console</a>
                             <ul class="js-guides">
                                 <li><a href="/console/project_settings/">Project Settings</a></li>
                             </ul>
                         </li>
                         <li class="js-topic">
                             <a href="/api/">API</a>
                             <ul class="js-guides">
                                 <li><a href="/api/publisher/">Publisher</a></li>
                             </ul>
                         </li>
                     </ul>
                 </div> <!-- /sidebar-module -->
             </div><!-- /sidebar-shell -->
            
        </div>
        <div id="content" class="col-md-8">
        
            
        
            
<h1 id="android-sdk-v2-introduction">Android SDK v2 introduction</h1>

<p>Latest SDK Version: 2.0.2</p>

<ul id="markdown-toc">
  <li><a href="#pre-requisites">Pre-requisites</a></li>
  <li><a href="#prepare-your-project-to-use-the-boxcar-android-sdk">Prepare your project to use the Boxcar Android SDK</a></li>
  <li><a href="#creating-a-new-push-client-from-scratch-with-core-api">Creating a new push client from scratch with core API</a></li>
  <li><a href="#boxcar-framework-demo-for-android">Boxcar Framework Demo for Android</a></li>
  <li><a href="#boxcar-framework-demo-for-amazon-kindle-devices">Boxcar Framework Demo for Amazon Kindle devices</a></li>
  <li><a href="#boxcar-framework-demo-for-nokia-nm-devices">Boxcar Framework Demo for Nokia NM devices</a></li>
</ul>

<h2 id="pre-requisites">Pre-requisites</h2>

<h3 id="for-android-devices">For Android Devices</h3>
<p>Before using this SDK you will need to:</p>

<ol>
  <li><a href="http://developer.android.com/google/gcm/gs.html#create-proj">Create a Google API project</a></li>
  <li><a href="http://developer.android.com/google/gcm/gs.html#gcm-service">Enable the GCM Service</a></li>
  <li><a href="http://developer.android.com/google/gcm/gs.html#access-key">Obtain an API key from Google API</a></li>
  <li>
<a href="/console/project_settings/">Create an Android client</a> on your Boxcar Console project, using the API key obtained on the previous step.</li>
</ol>

<p>After you have completed those steps, you should have the following elements:</p>

<ul>
  <li>
    <p>Google <em>Sender ID</em> for your application. This is a mandatory parameter for Google GCM based applications. It comes from Google and is actually the project numeric id. In the <a href="https://console.developers.google.com">Google API Console</a>, look at the URL of your project:</p>

    <pre><code>  https://code.google.com/apis/console/#project:xxxxxxxxxxx
</code></pre>

    <p><em>xxxxxxxxx</em> is the sender ID.</p>
  </li>
  <li>Google <em>API Key</em>
</li>
  <li>Boxcar <em>ClientKey</em> and <em>ClientSecret</em>: This is two strings embedded in your client application. They allow your application to register a device, notify the server about opened notifications. They are used to sign your request and “authenticate” your application.</li>
  <li>Boxcar <em>APIURL</em>: This is the endpoint to use for your organisation for all API calls.</li>
</ul>

<h4 id="supported-devices">Supported devices</h4>

<p>All Android devices running Android 2.3 Gingerbread (API 9) or higher.</p>

<h3 id="for-nokia-x-devices">For Nokia X Devices</h3>
<ol>
  <li>For Nokia devices you first need a Nokia Developer Account. Once logged in, you should access <a href="https://account.nnapi.ovi.com/cm/Web/services_direct.jsp">Nokia Services page</a>. After possible queries, you will see My NNA 2.0 services tab on the developer console main page. Enter the desired service identification name to the Sender ID text box and click Create.</li>
  <li>
<a href="/console/project_settings/">Create a Nokia client</a> on your Boxcar Console project, using the key obtained on the previous step.</li>
</ol>

<p>After you have completed those steps, you should have the following elements:</p>

<ul>
  <li>Nokia <em>Sender ID</em> for your application. The desired service identification name choosen on step 1.</li>
  <li>Nokia <em>API Key</em>
</li>
  <li>Boxcar <em>ClientKey</em> and <em>ClientSecret</em>: same as Android applications explained above.</li>
  <li>Boxcar <em>APIURL</em>: same as Android applications explained above.</li>
</ul>

<h3 id="for-kindle-devices">For Kindle Devices</h3>
<p>Steps are similar to the cases above. You need to create an account at Amazon and <a href="http://docs.aws.amazon.com/sns/latest/dg/mobile-push-adm.html">follow the instructions on their site</a>. Then you will need to set the <em>Client ID</em> and <em>Client Secret</em> to a Kindle client on your Boxcar Console project.</p>

<p>After you have completed those steps, you should have the following elements:</p>

<ul>
  <li>Amazon <em>OAuth Client ID</em> and <em>OAuth Client Secret</em>
</li>
  <li>Boxcar <em>ClientKey</em> and <em>ClientSecret</em>: same as Android applications explained above.</li>
  <li>Boxcar <em>APIURL</em>: same as Android applications explained above.</li>
</ul>

<h4 id="supported-devices-1">Supported devices</h4>

<p>Kindle Fire devices starting from 2nd generation, running Android 4.0.3 Ice Cream Sandwich (API 15) or higher.</p>

<h3 id="to-build-the-push-client-demos">To build the push client demos</h3>
<ul>
  <li><a href="http://www.gradle.org/downloads">Gradle 1.11</a></li>
  <li>Java SDK 1.6 or greater (1.7 recommended)</li>
</ul>

<p>In case of trouble, do not hesitate to contact ProcessOne support for Boxcar Push Service by sending a mail to <a href="mailto:support@boxcar.uservoice.com">support@boxcar.uservoice.com</a>.</p>

<h2 id="prepare-your-project-to-use-the-boxcar-android-sdk">Prepare your project to use the Boxcar Android SDK</h2>

<p>Android SDK library is hosted in our Boxcar Maven Repository.</p>

<p>If you manage your project with <a href="http://www.gradle.org/downloads">Gradle</a> (recommended), just add the following line within your <em>repositories</em> closure:</p>

<pre><code class="language-bash"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre>maven <span class="o">{</span> url <span class="s1">'http://developer.boxcar.io/maven'</span> <span class="o">}</span>
</pre></div>
</td>
</tr></table></code></pre>

<p>and add the SDK as a project dependency within the <em>dependencies</em> closure: </p>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre>compile "io.boxcar.universalpush:android-push-sdk:2.0.2"
</pre></div>
</td>
</tr></table></code></pre>

<p>There are two available flavours of the SDK library. One is for debugging, the other is for production. They behave indentically, except that the development version outputs debug information into the android log system.</p>

<ul>
  <li>Debug version: <em>io.boxcar.universalpush:android-push-sdk-debug:2.0.2</em>
</li>
  <li>Production version: <em>io.boxcar.universalpush:android-push-sdk:2.0.2</em>
</li>
</ul>

<p>The following is an example <em>build.gradle</em> descriptor file taken from the demo application:</p>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">org.apache.tools.ant.filters.ReplaceTokens</span>

<span class="n">buildscript</span> <span class="o">{</span>
    <span class="n">repositories</span> <span class="o">{</span>
	    <span class="n">mavenCentral</span><span class="o">()</span>
    <span class="o">}</span>
    <span class="n">dependencies</span> <span class="o">{</span>
        <span class="n">classpath</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">tools</span><span class="o">.</span><span class="na">build</span><span class="o">:</span><span class="nl">gradle:</span><span class="mf">0.12</span><span class="o">.</span><span class="mi">2</span><span class="err">'</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">repositories</span> <span class="o">{</span>
    <span class="n">mavenCentral</span><span class="o">()</span>
    <span class="n">mavenLocal</span><span class="o">()</span>
	<span class="n">maven</span> <span class="o">{</span> <span class="n">url</span> <span class="err">'</span><span class="nl">http:</span><span class="c1">//developer.boxcar.io/maven' }</span>
<span class="o">}</span>

<span class="n">apply</span> <span class="nl">plugin:</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">application</span><span class="err">'</span>

<span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">compile</span> <span class="s">"io.boxcar.universalpush:android-push-sdk-debug:2.0.2"</span>
<span class="o">}</span>

<span class="n">android</span> <span class="o">{</span>
    <span class="n">compileSdkVersion</span> <span class="mi">20</span>
    <span class="n">buildToolsVersion</span> <span class="s">"19.1.0"</span>
    <span class="n">defaultConfig</span> <span class="o">{</span>
        <span class="n">minSdkVersion</span> <span class="mi">9</span>
        <span class="n">versionCode</span> <span class="mi">200</span>
        <span class="n">versionName</span> <span class="s">"${demoVersion}"</span>
        <span class="n">applicationId</span> <span class="s">"io.boxcar.push.demo"</span>
    <span class="o">}</span>
    <span class="n">packagingOptions</span> <span class="o">{</span>
        <span class="n">exclude</span> <span class="err">'</span><span class="n">META</span><span class="o">-</span><span class="n">INF</span><span class="o">/</span><span class="n">DEPENDENCIES</span><span class="err">'</span>
        <span class="n">exclude</span> <span class="err">'</span><span class="n">META</span><span class="o">-</span><span class="n">INF</span><span class="o">/</span><span class="n">NOTICE</span><span class="err">'</span>
        <span class="n">exclude</span> <span class="err">'</span><span class="n">META</span><span class="o">-</span><span class="n">INF</span><span class="o">/</span><span class="n">LICENSE</span><span class="err">'</span>
        <span class="n">exclude</span> <span class="err">'</span><span class="n">META</span><span class="o">-</span><span class="n">INF</span><span class="o">/</span><span class="n">LICENSE</span><span class="o">.</span><span class="na">txt</span><span class="err">'</span>
        <span class="n">exclude</span> <span class="err">'</span><span class="n">META</span><span class="o">-</span><span class="n">INF</span><span class="o">/</span><span class="n">NOTICE</span><span class="o">.</span><span class="na">txt</span><span class="err">'</span>
    <span class="o">}</span>
    <span class="n">productFlavors</span> <span class="o">{</span>
        <span class="n">google</span> <span class="o">{</span>
             <span class="n">minSdkVersion</span> <span class="mi">9</span>
             <span class="n">targetSdkVersion</span> <span class="mi">19</span>
        <span class="o">}</span>
        <span class="n">kindle</span> <span class="o">{</span>
            <span class="n">minSdkVersion</span> <span class="mi">15</span>
            <span class="n">targetSdkVersion</span> <span class="mi">15</span>
        <span class="o">}</span>
        <span class="n">nokia</span> <span class="o">{</span>
            <span class="n">minSdkVersion</span> <span class="mi">16</span>
            <span class="n">targetSdkVersion</span> <span class="mi">16</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td>
</tr></table></code></pre>

<p>We recommend to check the demo application already packaged as a gradle project to see a working example.</p>

<h3 id="resources-hosted-in-our-maven-repository">Resources hosted in our Maven repository</h3>

<h4 id="sdk">SDK</h4>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td>
<td class="code">
<div class="highlight"><pre>group: 'io.boxcar.universalpush', name: 'android-push-sdk', version: '2.0.2'
group: 'io.boxcar.universalpush', name: 'android-push-sdk-debug', version: '2.0.2'
</pre></div>
</td>
</tr></table></code></pre>

<h4 id="javadoc">Javadoc</h4>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td>
<td class="code">
<div class="highlight"><pre>group: 'io.boxcar.universalpush', name: 'android-push-sdk-debug',
     version: '2.0.2', classifier: 'javadoc'
</pre></div>
</td>
</tr></table></code></pre>

<h4 id="demo-project-for-gradle">Demo project for gradle</h4>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td>
<td class="code">
<div class="highlight"><pre>group: 'io.boxcar.universalpush', name: 'android-push-demo',
     version: '2.0.2', classifier: 'gradle-project'
</pre></div>
</td>
</tr></table></code></pre>

<h2 id="creating-a-new-push-client-from-scratch-with-core-api">Creating a new push client from scratch with core API</h2>

<h3 id="framework-overview">Framework overview</h3>

<p>The Boxcar Push library includes basic objects to build clients quickly. Among important classes you have:</p>

<ul>
  <li>
<strong>Boxcar</strong>: This is the main entry point to interact with Universal Push Notification Platform. It offers methods to start the framework, register and unregister from the remote service; retrieve push tags and track notifications. Boxcar also uses a persistent cache based on SQLite database to store incoming notifications and track its internal state (unread / read).</li>
  <li>
<strong>BXCConfig</strong>: this is the configuration class to tweak the SDK. For example, the way notifications should be displayed and how they should refer to your application.</li>
  <li>
<strong>BXCNotification</strong>: represents an incoming notification from Universal Push Notification Platform.</li>
  <li>
<a name="events"></a><strong>io.boxcar.push.eventbus.event.*</strong>: all the different events this library could trigger, replacing the methods from the old <em>BXCCallback</em> mechanism:
    <ul>
      <li><em>RegistrationSuccessEvent</em></li>
      <li><em>BadgeResetSuccessEvent</em></li>
      <li><em>GetTagsSuccessEvent</em></li>
      <li><em>PingSuccessEvent</em></li>
      <li><em>UnregisterSuccessEvent</em></li>
      <li><em>NotificationReceivedEvent</em></li>
      <li><em>TrackNotificationSuccessEvent</em></li>
      <li><em>BadgeResetFailedEvent</em></li>
      <li><em>GetTagsFailedEvent</em></li>
      <li><em>PingFailedEvent</em></li>
      <li><em>UnregisterFailedEvent</em></li>
      <li><em>TrackNotificationFailedEvent</em></li>
      <li><em>RegistrationFailedEvent</em></li>
    </ul>
  </li>
</ul>

<p><strong>Note</strong>: some event classes, like <em>io.boxcar.push.eventbus.event.RegistrationSuccessEvent</em> do also have specific attributes with extended information. For example, <em>RegistrationSuccessEvent</em> contains the list of tags that were ‘rejected’ because these were marked as deprecated in the server.</p>

<h3 id="a-nameconfigureaconfigure-and-start-the-boxcar-framework">
<a name="configure"></a>Configure and start the Boxcar framework</h3>

<p><strong>Boxcar Push Library assumes your application does initialize the framework every time it is started.</strong> This means your application should override the method <em>Application#onCreate()</em> and initialize it there. If you do not initialize the framework at this stage you could have errors while dealing with incoming notifications from GCM (or any other provider). The first step your O.S. accomplishes when a notification has arrived for your application is to start it (if it wasn’t running), that’s why the framework should be initialized at that stage and not later:</p>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">();</span>
    <span class="n">startBXCPushFramework</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</td>
</tr></table></code></pre>

<p>The following is the implementation of <em>startBXCPushFramework()</em> taken from the demo app:</p>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="kd">private</span> <span class="kt">void</span> <span class="nf">startBXCPushFramework</span><span class="o">()</span> <span class="o">{</span>

    <span class="n">Boxcar</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="k">new</span> <span class="nf">BoxcarDemoDelegate</span><span class="o">(</span><span class="k">this</span><span class="o">));</span>

    <span class="n">PushSupportStatus</span> <span class="n">status</span> <span class="o">=</span> <span class="n">Boxcar</span><span class="o">.</span><span class="na">getPushSupportStatus</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">status</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">PushSupportStatus</span><span class="o">.</span><span class="na">supported</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">"Push not supported. Reason: "</span> <span class="o">+</span> <span class="n">status</span><span class="o">);</span>
        <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="s">"Push not supported"</span><span class="o">,</span>
            <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td>
</tr></table></code></pre>

<p>In brief, we do a single important operation on application startup:</p>

<ol>
  <li>Initialize the framework, passing your application delegate object</li>
</ol>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">Boxcar</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="k">new</span> <span class="nf">BoxcarDemoDelegate</span><span class="o">(</span><span class="k">this</span><span class="o">));</span>
</pre></div>
</td>
</tr></table></code></pre>

<p>The second parameter is a subclass from <em>BoxcarAppDelegate</em>. <strong>You should implement a custom application delegate class previously</strong>. In the demo application <em>BoxcarDemoDelegate</em> has this goal. It is a class extending <em>io.boxcar.push.BoxcarAppDelegate</em> and it is used by the framework any time it needs your specific configuration to initialize the SDK. See <em>io.boxcar.push.demo.BoxcarDemoDelegate</em> in the demo application for a very simple example.</p>

<h4 id="registering">Registering</h4>
<p>To register on Universal Push Notification Platform we need:</p>

<h5 id="for-android-devices-1">For Android Devices:</h5>
<p>A target device with Android API Level 9 or greater. This is required to support the new GCM client provided by <em>Google Play Library</em>.</p>

<h5 id="for-kindle-devices-1">For Kindle Devices:</h5>
<p>A target device with Android API Level 15 or greater. This is required to support ADM mechanism.</p>

<h5 id="for-nokia-x-devices-1">For Nokia X Devices:</h5>
<p>A target device with Android API Level 16 or greater. This is required to support Nokia Notification API (NNA) mechanism.</p>

<h5 id="parameters">Parameters</h5>

<p>To register devices against your Universal Push Notification Platform account, you need to set the credentials associated with your client as it was defined on your project.</p>

<p><strong>Note</strong>: on the demo application the values are defined on <em>res/values/config.xml</em>. There is a common file on <em>src/main/res/values/config.xml</em> which is dynamically merged by Gradle with each variant during build time. Variants are found on <em>src/google/res/values/config.xml</em>, <em>src/kindle/res/values/config.xml</em> and <em>src/nokia/res/values/config.xml</em>. </p>

<p>For example, if the project you own within the Universal Push Notification Platform is called “Foobar” and you have created two clients for it, namely “Foobar for Android” and “Foobar for Kindle”, then you will have two sets of credentials, one for the Android version and another set for the Kindle flavor. Refer to <a href="#pre-requisites">pre-requisites section</a> for more details. </p>

<ul>
  <li>
<em>Key</em> and <em>Secret</em> for the corresponding Universal Push Notification Platform client application.</li>
  <li>Google or Nokia <em>senderId</em>. Not used on Amazon ADM based applications.</li>
  <li>URL of the Universal Push Notification Platform.
    <ul>
      <li>
<em>pushScheme</em>: https</li>
      <li>
<em>pushHost</em>: console.boxcar.io</li>
      <li>
<em>pushPort</em>: 443</li>
    </ul>
  </li>
</ul>

<p>Connection details like <em>clientKey</em>, <em>clientSecret</em>, <em>pushScheme</em>, <em>pushHost</em>, <em>pushPort</em> and <em>senderId</em> are set on the configuration class <em>io.boxcar.push.BXCConfig</em>.</p>

<h4 id="notifications">Notifications</h4>

<p>You should also set an algorithm to handle incoming notifications. It must implement the interface defined by <em>io.boxcar.push.ui.BXCNotificationStrategy</em>. Currently the framework offers four different approaches:</p>

<ul>
  <li><em>io.boxcar.push.ui.AutomaticUINotificationStrategy</em></li>
  <li><em>io.boxcar.push.ui.MultipleUINotificationStrategy</em></li>
  <li><em>io.boxcar.push.ui.ExtendedUINotificationStrategy</em></li>
  <li><em>io.boxcar.push.ui.DummyNotificationStrategy</em></li>
</ul>

<p>with the exception of <em>DummyNotificationStrategy</em>, all of them extend from io.boxcar.push.ui.BaseUINotificationStrategy, which implements <em>io.boxcar.push.ui.BXCNotificationStrategy</em> but also offers some base methods that allow to customize some options.</p>

<h5 id="a-nameautomaticuiaautomaticuinotificationstrategy">
<a name="automaticUI"></a>AutomaticUINotificationStrategy</h5>

<p>Renders notifications on the Android Notification Center and updates it if there were pending notifications on it. In other words, it groups notifications and keeps a pending intent for the last event received. To extract the notification from the intent triggered after the user tapped on it, you should get the “notification” argument. Example:</p>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onNewIntent</span><span class="o">(</span><span class="n">Intent</span> <span class="n">intent</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onNewIntent</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
    <span class="n">BXCNotification</span> <span class="n">notification</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getParcelableExtra</span><span class="o">(</span><span class="s">"notification"</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">notification</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// handle notification</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td>
</tr></table></code></pre>

<h5 id="multipleuinotificationstrategy">MultipleUINotificationStrategy</h5>

<p>Renders a new notification on the Android Notification Center and a new notification on the Notification Area. Each notification is unique and keeps the alert information specific to it. So, if application receives three alerts, it will render three different notification icons on the notification area. The way to handle intents generated by notifications built by this strategy is the same than <a href="#automaticUI"><em>AutomaticUINotificationStrategy</em></a>.</p>

<h5 id="extendeduinotificationstrategy">ExtendedUINotificationStrategy</h5>

<p>Renders a single notification showing the last three received alerts since the last time <em>Boxcar#cleanNotificationsAndBadge(Context context)</em> was called. The action to be performed when user taps on it depends on the amount of pending notifications and type. Strategy constructor allows up to three Activities to be opened, depending on the case type, which could be:</p>

<ol>
  <li>there is a <em>single</em> unread <em>plain notification</em>
</li>
  <li>there is a <em>single</em> unread <em>rich notification</em>
</li>
  <li>there are two or more unread notifications</li>
</ol>

<h6 id="extendeduinotificationstrategy-instantiation-example">ExtendedUINotificationStrategy instantiation example</h6>

<p>The following example shows a possible instantiation using three different activities:</p>

<ol>
  <li>NormalNotificationActivity (manages a single plain notification)</li>
  <li>WebViewActivitiy (manages a single rich notification)</li>
  <li>InboxActivity (manages a collection of notifications, either plain or rich)</li>
</ol>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">BXCNotificationStrategy</span> <span class="n">notificationStrategy</span> <span class="o">=</span>
    <span class="k">new</span> <span class="nf">ExtendedUINotificationStrategy</span><span class="o">(</span><span class="n">icon</span><span class="o">,</span> <span class="n">title</span><span class="o">,</span> <span class="n">NormalNotificationActivity</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
        <span class="n">WebViewActivity</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">InboxActivity</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</pre></div>
</td>
</tr></table></code></pre>

<p>For the first and second case (single notification), the BXCNotification instance representing the incoming alert
should be extracted from the notification intent within the extra argument <em>“notification”</em>. The following example
shows how to handle an incoming intent from a single rich push:</p>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="kd">private</span> <span class="kt">void</span> <span class="nf">handleIntent</span><span class="o">(</span><span class="n">Intent</span> <span class="n">intent</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="s">"url"</span><span class="o">);</span>
    <span class="n">BXCNotification</span> <span class="n">notification</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getParcelableExtra</span><span class="o">(</span><span class="s">"notification"</span><span class="o">);</span>
    <span class="c1">// ... do your processing here</span>
<span class="o">}</span>
</pre></div>
</td>
</tr></table></code></pre>

<p>The following example shows how to handle incoming intents containing several unread notifications. Please note that
we now extract a list of incoming notifications from the extra argument <em>“notifications”</em>:</p>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="kd">private</span> <span class="kt">void</span> <span class="nf">handleIntent</span><span class="o">(</span><span class="n">Intent</span> <span class="n">intent</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="s">"url"</span><span class="o">);</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">BXCNotification</span><span class="o">&gt;</span> <span class="n">incomingNotifications</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getParcelableArrayListExtra</span><span class="o">(</span><span class="s">"notifications"</span><span class="o">);</span>
    <span class="c1">// ... do your processing here</span>
<span class="o">}</span>
</pre></div>
</td>
</tr></table></code></pre>

<h5 id="dummynotificationstrategy">DummyNotificationStrategy</h5>
<p>This is a direct implementation of the <em>io.boxcar.push.ui.BXCNotificationStrategy</em> interface which does nothing when a notification is received.</p>

<p>You should take this class into account if you want to take complete control of the notification process. If you set an instance of this class as the notification strategy and you also listen to notification events through <em>BXCCallback#notificationReceived(BXCNotification notification)</em> you will have complete control about what to do on your application every time a push is received. </p>

<p>The dummy notifcation strategy should be instantiated with the empty constructor:</p>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">BXCNotificationStrategy</span> <span class="n">notificationStrategy</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">DummyNotificationStrategy</span><span class="o">();</span>
</pre></div>
</td>
</tr></table></code></pre>

<p><strong>Note</strong>: In the demo applicaton all parameters are externalized into <em>src/${variant}/res/values/config.xml</em>. Where the common variant is <em>main</em> which is merged during build time with each variant (<em>google</em>, <em>kindle</em>, <em>nokia</em>).</p>

<h5 id="custom-notification-strategies">Custom notification strategies</h5>
<p>You can also define your own strategy implementing the interface <em>io.boxcar.push.ui.BXCNotificationStrategy</em>. There is also a base class with template methods based on the previous interface.</p>

<p>The most important thing to remember is that every time a new push arrives to the device, the SDK will call the following method: </p>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">handleNotification</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">BXCNotification</span> <span class="n">notification</span><span class="o">,</span>
                               <span class="n">BoxcarAppDelegate</span> <span class="n">delegate</span><span class="o">)</span> <span class="o">{</span>
	<span class="c1">// your custom implementation goes here</span>
<span class="o">}</span>
</pre></div>
</td>
</tr></table></code></pre>

<p>Below is a source example of the <em>MultipleUINotificationStrategy</em> implementation, which extends from the aforementioned base class <em>BaseUINotificationStrategy</em>. It is a good starting point to implement your own if the provided strategies don’t fit your usage scenario.</p>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="kn">package</span> <span class="n">io</span><span class="o">.</span><span class="na">boxcar</span><span class="o">.</span><span class="na">push</span><span class="o">.</span><span class="na">ui</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">io.boxcar.push.BoxcarAppDelegate</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.boxcar.push.model.BXCNotification</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.app.Activity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.app.NotificationManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.app.PendingIntent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.Context</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.Intent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.graphics.Bitmap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.net.Uri</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.support.v4.app.NotificationCompat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.util.Log</span><span class="o">;</span>
 
<span class="cm">/**</span>
<span class="cm"> * Renders one new icon in the notification area for each incoming push.</span>
<span class="cm"> * A different notification will be shown in the notification center too.</span>
<span class="cm"> * Intent targets are different depending on whether this is a simple</span>
<span class="cm"> * or a rich push (containing an URL).</span>
<span class="cm"> *  </span>
<span class="cm"> * @author jpcarlino</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MultipleUINotificationStrategy</span> <span class="kd">extends</span> <span class="n">BaseUINotificationStrategy</span> <span class="o">{</span>
 
    <span class="kd">private</span> <span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Activity</span><span class="o">&gt;</span> <span class="n">normalPushActivity</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Activity</span><span class="o">&gt;</span> <span class="n">richPushActivity</span><span class="o">;</span>
   
    <span class="cm">/**</span>
<span class="cm">     * Default constructor.</span>
<span class="cm">     *</span>
<span class="cm">     * @param icon</span>
<span class="cm">     *            the icon (resource id) to use on the tray</span>
<span class="cm">     * @param title</span>
<span class="cm">     *            the title of the notification items</span>
<span class="cm">     * @param normalPushActivity</span>
<span class="cm">     *            the target activity to be invoked when a normal push is</span>
<span class="cm">     *            clicked on the notification tray</span>
<span class="cm">     * @param richPushActivity</span>
<span class="cm">     *            the target activity to be invoked when a rich push is received</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="nf">MultipleUINotificationStrategy</span><span class="o">(</span><span class="kt">int</span> <span class="n">icon</span><span class="o">,</span> <span class="n">String</span> <span class="n">title</span><span class="o">,</span>
                    <span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Activity</span><span class="o">&gt;</span> <span class="n">normalPushActivity</span><span class="o">,</span>
                    <span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Activity</span><span class="o">&gt;</span> <span class="n">richPushActivity</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">(</span><span class="n">icon</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="n">title</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="n">normalPushActivity</span><span class="o">,</span> <span class="n">richPushActivity</span><span class="o">);</span>
    <span class="o">}</span>
 
    <span class="kd">public</span> <span class="nf">MultipleUINotificationStrategy</span><span class="o">(</span><span class="kt">int</span> <span class="n">icon</span><span class="o">,</span> <span class="n">Bitmap</span> <span class="n">largeIcon</span><span class="o">,</span>
                    <span class="n">String</span> <span class="n">title</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">showBadge</span><span class="o">,</span>
                    <span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Activity</span><span class="o">&gt;</span> <span class="n">normalPushActivity</span><span class="o">,</span>
                    <span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Activity</span><span class="o">&gt;</span> <span class="n">richPushActivity</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">icon</span> <span class="o">=</span> <span class="n">icon</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">largeIcon</span> <span class="o">=</span> <span class="n">largeIcon</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">showBadge</span> <span class="o">=</span> <span class="n">showBadge</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">normalPushActivity</span> <span class="o">=</span> <span class="n">normalPushActivity</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">richPushActivity</span> <span class="o">=</span> <span class="n">richPushActivity</span><span class="o">;</span>
    <span class="o">}</span>
   
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">handleNotification</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">BXCNotification</span> <span class="n">notification</span><span class="o">,</span>
                                   <span class="n">BoxcarAppDelegate</span> <span class="n">delegate</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">generateNotification</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">notification</span><span class="o">,</span> <span class="n">delegate</span><span class="o">);</span>
    <span class="o">}</span>
 
    <span class="cm">/**</span>
<span class="cm">     * Issues a notification to inform the user that server has sent a message.</span>
<span class="cm">     */</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">generateNotification</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span>
                    <span class="n">BXCNotification</span> <span class="n">notification</span><span class="o">,</span> <span class="n">BoxcarAppDelegate</span> <span class="n">delegate</span><span class="o">)</span> <span class="o">{</span>
 
        <span class="n">Intent</span> <span class="n">notificationIntent</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="n">extractURL</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">notification</span><span class="o">);</span>        
        <span class="k">if</span> <span class="o">(</span><span class="n">url</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">v</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">"Rendering webview link for URL: "</span> <span class="o">+</span> <span class="n">url</span><span class="o">);</span>
            <span class="n">notificationIntent</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Intent</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">richPushActivity</span><span class="o">);</span>
            <span class="n">notificationIntent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"url"</span><span class="o">,</span> <span class="n">url</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">v</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">"Rendering normal notification without URL"</span><span class="o">);</span>
            <span class="n">notificationIntent</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Intent</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">normalPushActivity</span><span class="o">);</span>
        <span class="o">}</span>
 
        <span class="n">notificationIntent</span><span class="o">.</span><span class="na">setFlags</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">FLAG_ACTIVITY_CLEAR_TOP</span>
                        <span class="o">|</span> <span class="n">Intent</span><span class="o">.</span><span class="na">FLAG_ACTIVITY_SINGLE_TOP</span><span class="o">);</span>
        <span class="n">notificationIntent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"notification"</span><span class="o">,</span> <span class="n">notification</span><span class="o">);</span>
        <span class="n">notificationIntent</span><span class="o">.</span><span class="na">setData</span><span class="o">((</span><span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"custom://"</span>
                        <span class="o">+</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">())));</span>
        <span class="n">notificationIntent</span><span class="o">.</span><span class="na">setAction</span><span class="o">(</span><span class="s">"actionstring"</span>
                        <span class="o">+</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">());</span>
 
        <span class="kt">int</span> <span class="n">notificationId</span> <span class="o">=</span> <span class="n">getNotificationIdFor</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">notification</span><span class="o">,</span>
                                                  <span class="n">delegate</span><span class="o">);</span>
       
        <span class="n">PendingIntent</span> <span class="n">intent</span> <span class="o">=</span> <span class="n">PendingIntent</span><span class="o">.</span><span class="na">getActivity</span><span class="o">(</span><span class="n">context</span><span class="o">,</span>
                        <span class="n">notificationId</span><span class="o">,</span>
                        <span class="n">notificationIntent</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
        <span class="kt">long</span> <span class="n">when</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
        
        <span class="c1">// The following statement calls a hook method defined in</span>
        <span class="c1">// BaseUINotificationStrategy that instantiates a notification</span>
        <span class="c1">// builder based on the attributes set above.</span>
        <span class="n">NotificationCompat</span><span class="o">.</span><span class="na">Builder</span> <span class="n">notifyBuilder</span> <span class="o">=</span> <span class="n">prepareNotificationBuilder</span><span class="o">(</span>
                        <span class="n">context</span><span class="o">,</span> <span class="n">notification</span><span class="o">,</span> <span class="n">when</span><span class="o">,</span> <span class="n">intent</span><span class="o">,</span> <span class="n">delegate</span><span class="o">);</span>
 
        <span class="n">NotificationManager</span> <span class="n">notificationManager</span> <span class="o">=</span> <span class="o">(</span><span class="n">NotificationManager</span><span class="o">)</span> <span class="n">context</span>
                        <span class="o">.</span><span class="na">getSystemService</span><span class="o">(</span><span class="n">Context</span><span class="o">.</span><span class="na">NOTIFICATION_SERVICE</span><span class="o">);</span>
        <span class="n">notificationManager</span><span class="o">.</span><span class="na">notify</span><span class="o">(</span><span class="n">notificationId</span><span class="o">,</span>
                        <span class="n">notifyBuilder</span><span class="o">.</span><span class="na">build</span><span class="o">());</span>
    <span class="o">}</span>
   
<span class="o">}</span>
</pre></div>
</td>
</tr></table></code></pre>

<h4 id="configuring-the-sound-to-play-on-incoming-notifications">Configuring the sound to play on incoming notifications</h4>

<p>When a push arrives, the SDK checks the payload content to know if it should play a sound when the notification is sent to the Android Notification center.
The following rule is followed by the SDK:</p>

<ul>
  <li>if the payload doesn’t define a sound file to play, it doesn’t play any sound (silent push)</li>
  <li>if the payload defines a sound file that can’t be found on the application, it plays the default system sound</li>
  <li>otherwise, it plays the sound defined in the payload</li>
</ul>

<p>As can be seen, the push data can contain a reference to a sound file to play. The idea is that you application can have multiple sounds, one for urgent notifications, another for normal content, etc. In that case, the person that publishes the push just tells what is the sound that should be played when the message arrives at the user’s device.</p>

<p>Every custom sound file needed (any other than the system’s default) should be packaged along with the mobile application. You should simply put the sound file under res/raw folder of your project. If an incoming push tells to play ‘beep’ sound, then the SDK will locate a sound resource with that name on res/raw folder (for example ‘res/raw/beep.wav’) and play it. If the file can’t be located, the system’s default is played instead.</p>

<p>If you want a different default sound (something else than system’s default) you can set it too. The method to define a default sound is the following:</p>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">BaseUINotificationStrategy</span><span class="o">.</span><span class="na">setDefaultSound</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="kt">int</span> <span class="n">resourceId</span><span class="o">);</span>
</pre></div>
</td>
</tr></table></code></pre>

<p>For example:</p>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">notificationStrategy</span><span class="o">.</span><span class="na">setDefaultSound</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">raw</span><span class="o">.</span><span class="na">beep</span><span class="o">);</span>
</pre></div>
</td>
</tr></table></code></pre>

<h4 id="configuring-notification-actions">Configuring notification actions</h4>
<p>The Boxcar Universal Push Notification Platform allows to define <em>categories</em> for the pushes to send. This is an optional attribute you can set on the push which helps the SDK to distinguish between different kind of notifications.</p>

<p>You can for example configure you application to add one or more buttons (actions) to the notification widget when the category is <em>‘sports_schedule’</em>.</p>

<p>Let’s say you want to add the button ‘Favorite’ for pushes belonging to that category. In that case you should create a mapping between the <em>sports_schedule</em> category and the action(s) you want for that notification.</p>

<p>Override the method <em>getNotificationCategoryMapping(String category, Context context)</em> on your BoxcarAppDelegate subclass:</p>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">NotificationCategoryMapping</span> <span class="nf">getNotificationCategoryMapping</span><span class="o">(</span><span class="n">String</span> <span class="n">category</span><span class="o">,</span> <span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">NotificationCategoryMapping</span> <span class="n">mapping</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">category</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">category</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"sports_schedule"</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">mapping</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">NotificationCategoryMapping</span><span class="o">(</span><span class="s">"sports_schedule"</span><span class="o">);</span>

        <span class="n">mapping</span><span class="o">.</span><span class="na">addActionBuilder</span><span class="o">(</span><span class="k">new</span> <span class="nf">BaseActionBuilder</span><span class="o">()</span> <span class="o">{</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getActionIcon</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">BXCNotification</span> <span class="n">notification</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">ic_menu_add_star_holo_dark</span><span class="o">;</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="n">String</span> <span class="nf">getActionTitle</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">BXCNotification</span> <span class="n">notification</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">context</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">fav_notif_action</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="n">PendingIntent</span> <span class="nf">getPendingIntent</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span>
                    <span class="n">BXCNotification</span> <span class="n">notification</span><span class="o">)</span> <span class="o">{</span>

                <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Intent</span><span class="o">(</span><span class="n">NotificationActionIntentService</span><span class="o">.</span><span class="na">FAV_ACTION</span><span class="o">);</span>
                <span class="n">intent</span><span class="o">.</span><span class="na">setClass</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">NotificationActionIntentService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
                <span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="n">NotificationActionIntentService</span><span class="o">.</span><span class="na">ACTION_NOTIFICATION_EXTRA</span><span class="o">,</span> <span class="n">notification</span><span class="o">);</span>

                <span class="k">return</span>	<span class="n">PendingIntent</span><span class="o">.</span><span class="na">getService</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="n">intent</span><span class="o">,</span>
                        <span class="n">PendingIntent</span><span class="o">.</span><span class="na">FLAG_CANCEL_CURRENT</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="n">mapping</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</td>
</tr></table></code></pre>

<p>The example above basically creates a mapping with an action builder that will be called when a notification arrives and matches that category. Note in this example we just add a single action (“Favorite”), but you can add multiple, just calling multiple times the method <em>NotificationCategoryMapping#addActionBuilder(ActionBuilder builder)</em>. You can also have multiple mappings (different set of actions for different categories).</p>

<p>This will result in a notification in the <em>Notification Center</em> with a “Favorite” button. You should also define ‘what to do’ when the user presses that button. In the example above we just send an intent to an <em>IntentService</em> that should perform a background task. You could have set it to open a new Activity if there is no background processing to do.</p>

<p><strong>Note</strong>: Action buttons won’t appear on platforms prior to API 16 (Android 4.1).</p>

<h4 id="showing-a-big-picture-when-the-notification-is-expanded">Showing a big picture when the notification is expanded</h4>
<p>The Boxcar Universal Push Notification Platform allows to define an <em>image URL</em> for a given push notification. This is an optional attribute you can set on the push which tells the SDK to fetch an image and set it as a big background picture when the notification is expanded.</p>

<p>For example, you can send a push about a brand new product released by your company and set a nice picture of it to be displayed on each device.</p>

<p>When the push arrives, the device establishes an HTTP connection, reads the image from the remote site and sets it as the background picture for the notification widget. Source picture should be ≤ <em>450 DP wide</em>, <em>~2:1 aspect</em>.</p>

<p>Here are two examples. A big picture notification displayed in a handheld phone device and the same notification displayed as a card in an Android watch:</p>

<p><img src="/images/android/phone-device-big-picture.png" alt=""> <img src="/images/android/wear-device-big-picture.png" alt=""></p>

<p>Read more about how to specify pictures on the <a href="/api/publisher">Publisher API Introduction</a>.</p>

<p><strong>Note</strong>: This feature is available only on Android devices with API level &gt;= 16. </p>

<h2 id="boxcar-framework-demo-for-android">Boxcar Framework Demo for Android</h2>

<p>The Boxcar Push Client demo project is an example on how to integrate with Boxcar Push Service on Android devices based on Google Cloud Messaging (GCM).</p>

<h3 id="boxcar-sdk-integration">Boxcar SDK integration</h3>

<h4 id="setup-your-project">Setup your project</h4>

<ul>
  <li>
<strong>Step 1</strong>: Create a new Android project. See <a href="#prepare-your-project-to-use-the-boxcar-android-sdk">“Prepare your project to use the Boxcar Android SDK”</a> section for more information.</li>
  <li>
<strong>Step 2</strong>: Add GCM permissions to your Android Manifest file. Permissions are specified in XML as children of &lt;manifest&gt; element. In this example our application package (as defined on ‘package’ attribte of &lt;manifest&gt; element) is <em>“io.boxcar.push.demo”</em>:</li>
</ul>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"com.google.android.c2dm.permission.RECEIVE"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;permission</span> <span class="na">android:name=</span><span class="s">"io.boxcar.push.demo.permission.C2D_MESSAGE"</span> <span class="na">android:protectionLevel=</span><span class="s">"signature"</span> <span class="nt">/&gt;</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>
<strong>Step 3</strong>: Add the Google Play services version to your manifest as as children of &lt;application&gt; element.</li>
</ul>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="nt">&lt;meta-data</span> <span class="na">android:name=</span><span class="s">"com.google.android.gms.version"</span> <span class="na">android:value=</span><span class="s">"@integer/google_play_services_version"</span><span class="nt">/&gt;</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>
<strong>Step 4</strong>: Register the GCM service on your Android manifest file. Services are specified in XML as children of &lt;application&gt; element.</li>
</ul>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="nt">&lt;service</span> <span class="na">android:name=</span><span class="s">"io.boxcar.push.GooglePlayGCMIntentService"</span> <span class="na">android:enabled=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>
<strong>Step 5</strong>: Configure the corresponding receiver for GCM incoming notifications. Receivers are specified in XML as children of &lt;application&gt; element.</li>
</ul>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="nt">&lt;receiver</span> <span class="na">android:name=</span><span class="s">"io.boxcar.push.GooglePlayGCMReceiver"</span> <span class="na">android:enabled=</span><span class="s">"true"</span> <span class="na">android:permission=</span><span class="s">"com.google.android.c2dm.permission.SEND"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;intent-filter&gt;</span>
        <span class="c">&lt;!-- Receives the actual messages. --&gt;</span>
        <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"com.google.android.c2dm.intent.RECEIVE"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">"io.boxcar.push.demo"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/intent-filter&gt;</span>
<span class="nt">&lt;/receiver&gt;</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>
<strong>Step 6</strong>: If you expect to use UDID (Universal Device ID), register the service on your Android manifest file. Services are specified in XML as children of &lt;application&gt; element:</li>
</ul>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="nt">&lt;service</span> <span class="na">android:name=</span><span class="s">"org.openudid.android.OpenUDIDService"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;intent-filter&gt;</span>
        <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"org.openudid.android.GETUDID"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/intent-filter&gt;</span>
<span class="nt">&lt;/service&gt;</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>
<strong>Step 7</strong>: (Optional) Add GET_ACCOUNTS permissions to your Android Manifest file. This permission allows to inspect if this device has a Google / Amazon account associated with it. This allows a finer grain check to know if push is supported or not. This permission is optional. If not set, Boxcar Android Push SDK will skip this specific check. Permissions are specified in XML as children of &lt;manifest&gt; element.</li>
</ul>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.GET_ACCOUNTS"</span> <span class="nt">/&gt;</span>
</pre></div>
</td>
</tr></table></code></pre>

<p><strong>Note</strong>: you can see a working example of the <em>AndroidManifest.xml</em> file within the push demos released along with the core SDK library. There is currently a common manifest file for all demos on <em>src/main/AndroidManifest.xml</em> which is then merged by the <em>Gradle</em> build manager with the platform specific parts. For instance, the specific elements for Google Android are located at <em>src/google/AndroidManifest.xml</em>.</p>

<h4 id="source-code">Source code</h4>

<h3 id="usage">Usage</h3>

<p>Usage is shown in <em>io.boxcar.push.demo.DemoApplication</em> and <em>io.boxcar.push.demo.NormalNotificationActivity</em>.</p>

<p><em>Boxcar</em> is the only point of interaction, aside from the callbacks to handle incoming notifications.</p>

<ul>
  <li>When your application starts you would normally initialize the framework pasing the delegate instance, as explained on subsection <a href="#configure">“Configure and start the Boxcar framework”</a>.</li>
</ul>

<p>After that point, you should subscribe on each application component (typically Activities) to receive the events produced by the Push library:</p>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">Boxcar</span><span class="o">.</span><span class="na">registerSubscriber</span><span class="o">(</span><span class="n">Object</span> <span class="n">subscriber</span><span class="o">);</span>
</pre></div>
</td>
</tr></table></code></pre>

<p>Push library relies on <a href="https://github.com/greenrobot/EventBus">EventBus</a> to loosely couple your artifacts with the library. Your artifacts do not need to listen to all events, just those it is really interested in. Because you would normally expect to update the UI upon the reception of a push or any other event, you will define one method named ‘onEventMainThread’ for each different event type. Example:</p>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">onEventMainThread</span><span class="o">(</span><span class="n">RegistrationSuccessEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">renderLabels</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</td>
</tr></table></code></pre>

<p>this method will be called every time a success registration is performed by the client, as long as your artifact was previously registered through the use of <em>Boxcar.registerSubscriber(Object subscriber)</em> method.</p>

<p><strong>You should always</strong> register your artifact in its <em>onResume()</em> method and also unregister it in the <em>onPause()</em> method, like this:</p>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onPause</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onPause</span><span class="o">();</span>
    <span class="n">Boxcar</span><span class="o">.</span><span class="na">unregisterSubscriber</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onResume</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onResume</span><span class="o">();</span>
    <span class="n">Boxcar</span><span class="o">.</span><span class="na">registerSubscriber</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</td>
</tr></table></code></pre>

<p>See the complete <a href="#events">list of supported events</a>.</p>

<p><strong>Note</strong>: previously, an additional argument, <em>applicationId</em>, was required by #start method to identify your application version. This is now handled internally by the framework. However is still important to define it on your Android manifest file.</p>

<ul>
  <li>Unregister from push services. Please note that after this invocation your application won’t receive any new push notification unless a new registration is performed:</li>
</ul>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">Boxcar</span><span class="o">.</span><span class="na">unregister</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">);</span>
</pre></div>
</td>
</tr></table></code></pre>

<p><strong>Note</strong>: this method throws throws <em>io.boxcar.push.registration.BXCPendingOperationException</em> if there is a pending registration or unregistration in process. You should always receive a corresponding callback telling when the current operation has finished (either successfully or with error). In other words, do not call this method until your previous call (either ‘register’ or ‘unregister’) hasn’t received a confirmation via <em>BXCCallback</em>.</p>

<ul>
  <li>
    <p>Register device. Registers this device on GCM gateway and Universal Push Notification Platform using the provided credentials.</p>
  </li>
  <li>
    <p>Register specifying the initial set of tags or channels and a user name:</p>
  </li>
</ul>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">Boxcar</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">tags</span><span class="o">,</span> <span class="n">String</span> <span class="n">username</span><span class="o">);</span>
</pre></div>
</td>
</tr></table></code></pre>

<p><strong>Note</strong>: check that your tag list doesn’t contain <em>deprectated</em> tags, if any. You should check if your push project has tags that were marked as deprecated. If you register to some deprecated tag, you will be informed in the corresponding <em>RegistrationSuccessEvent</em> event, through <em>getDeprecatedTags()</em> method.</p>

<ul>
  <li>Register to the channel used for the last time (if any):</li>
</ul>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">Boxcar</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">String</span> <span class="n">username</span><span class="o">);</span>
</pre></div>
</td>
</tr></table></code></pre>

<p>When registration is success, your application should receive an event with class RegistrationSuccessEvent. That instance contains the list of tags your device is now subscribed to <strong>and also the list of tags you tried to subscribe but are marked as deprecated for the Boxcar project to which your application belongs</strong>. These tags should be cleaned up by your application. In the following example taken from the demo application you can see how to extract the list of accepted and deprecated tags from the registration success event:</p>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">onEventMainThread</span><span class="o">(</span><span class="n">RegistrationSuccessEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>

    <span class="n">String</span><span class="o">[]</span> <span class="n">deprecatedTags</span> <span class="o">=</span>  <span class="n">event</span><span class="o">.</span><span class="na">getDeprecatedTags</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">deprecatedTags</span><span class="o">.</span><span class="na">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">StringBuffer</span> <span class="n">message</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">StringBuffer</span><span class="o">(</span><span class="s">"Deprecated tags: "</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">deprecatedTags</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">message</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">deprecatedTags</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
            <span class="n">message</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">", "</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">message</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">deprecatedTags</span><span class="o">[</span><span class="n">deprecatedTags</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">]);</span>
        <span class="n">Log</span><span class="o">.</span><span class="na">w</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="n">message</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="n">renderLabels</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>Register into Universal Push Notification Platform with the tags and username used the last time:</li>
</ul>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">Boxcar</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">);</span>
</pre></div>
</td>
</tr></table></code></pre>

<p><strong>Note</strong>: this method throws <em>io.boxcar.push.registration.BXCPendingOperationException</em> if there is a pending registration or unregistration in process. You should always receive a corresponding callback telling when the current operation has finished (either successfully or with error). In other words, do not call this method until your previous call (either ‘register’ or ‘unregister’) hasn’t received a confirmation via via onEvent<em>(RegistrationSuccessEvent), onEvent</em>(RegistrationFailedEvent), onEvent<em>(UnregisterSuccessEvent event) or onEvent</em>(UnregisterFailedEvent event).</p>

<ul>
  <li>Get available tags. This operation can be performed without previous authentication. The result will be informed through onEvent(<em>GetTagsSuccessEvent event</em>):</li>
</ul>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">Boxcar</span><span class="o">.</span><span class="na">getTags</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">);</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>Subscribers registration/unregistration:</li>
</ul>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">Boxcar</span><span class="o">.</span><span class="na">registerSubscriber</span><span class="o">(</span><span class="n">Object</span> <span class="n">subscriber</span><span class="o">);</span>
<span class="n">Boxcar</span><span class="o">.</span><span class="na">unregisterSubscriber</span><span class="o">(</span><span class="n">Object</span> <span class="n">subscriber</span><span class="o">);</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>Track an incoming notification:</li>
</ul>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">Boxcar</span><span class="o">.</span><span class="na">trackNotification</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">BXCNotification</span> <span class="n">notification</span><span class="o">,</span>
       <span class="n">BXCTrackNotification</span><span class="o">.</span><span class="na">State</span><span class="o">.</span><span class="na">active</span><span class="o">);</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>Track when application was opened or is being used by the final user</li>
</ul>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">Boxcar</span><span class="o">.</span><span class="na">appBecameActive</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">);</span>
</pre></div>
</td>
</tr></table></code></pre>

<p>This method is similar to <em>Boxcar#trackNotification(…)</em> in the sense it is used for statistical purposes, allowing to know how much your application is being used. You would normally call this method on places like your activity <em>onResume()</em> method.</p>

<ul>
  <li>Get the set of tags to which this instance was registered since the last registration attempt. It won’t include tags that were marked as <em>deprecated</em> for the current push project:</li>
</ul>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">getSubscribedTags</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">)</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>Get current status of Boxcar Framework. Either one of <em>registered</em>, <em>unregistered</em>, <em>registering</em> or <em>unregistering</em>:</li>
</ul>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">Boxcar</span><span class="o">.</span><span class="na">getState</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">);</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>Clean Android Notification Center and reset the number of unread notifications on Universal Push Notification Platform:</li>
</ul>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">Boxcar</span><span class="o">.</span><span class="na">cleanNotifications</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">);</span>
<span class="n">Boxcar</span><span class="o">.</span><span class="na">cleanBadge</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">);</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>Check if push is supported on this device. It returns an enumerated type containing the error code or ‘supported’ when push is natively supported on current device. Push must be natively supported as a pre-requisite of Boxcar Push SDK to work.</li>
</ul>

<pre><code class="language-java"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="n">PushSupportStatus</span> <span class="n">status</span> <span class="o">=</span> <span class="n">Boxcar</span><span class="o">.</span><span class="na">getPushSupportStatus</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(!</span><span class="n">status</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">PushSupportStatus</span><span class="o">.</span><span class="na">supported</span><span class="o">))</span>
    <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">"Push not supported. Reason: "</span> <span class="o">+</span> <span class="n">status</span><span class="o">);</span>
</pre></div>
</td>
</tr></table></code></pre>

<p>Possible values an its meaning:</p>

<pre><code>*supported*: native push is supported on this device (GCM on Android, ADM on Amazon, etc).
*missingNativePushAccount*: this device is not linked to the native provider (Google / Amazon account).
*missingNativePushDependencies*: current operating system doesn't provide the required dependencies. Usually this is because operating system version is old.
*missingNativePushManifest*: AndroidManifest doesn't provide all the required permissions and services required to support native push.
</code></pre>

<p>You are not required to explicitly check push support status. It will be performed automatically on <em>Boxcar.register(…)</em> call and and exception thrown if native push is not supported. Remember that if you do not allow the application to access account information (<em>android.permission.GET_ACCOUNTS</em>), the SDK won’t be able to check if the device is linked to an authorized provider account (Gmail account on standard Android devices, Amazon on Kindle devices).</p>

<h3 id="troubleshooting">Troubleshooting</h3>

<h4 id="device-seems-registered-but-no-pushes-are-received">Device seems registered but no pushes are received</h4>

<ol>
  <li>check that your device is on the list of registered devices, of for the corresponding project under Boxcar Push Service administration console.</li>
  <li>ensure that the <em>clientKey</em> and <em>clientSecret</em> set on <em>io.boxcar.push.BXCConfig</em> are the same as defined on your Universal Push Notification Platform project for the corresponding Android client application.</li>
  <li>similarly, check that <em>senderId</em> (excluding Amazon Kindle apps) value defined on <em>io.boxcar.push.BXCConfig</em> is associated with the <em>API Key</em> set on Boxcar Push Service for the corresponding Android client application. If your device had a wrong <em>senderId</em> previously, please make sure your device is unregistered by calling <em>Boxcar.unregister()</em>. This step forces your application to request a new token to GCM/Nokia cloud.</li>
</ol>

<h2 id="boxcar-framework-demo-for-amazon-kindle-devices">Boxcar Framework Demo for Amazon Kindle devices</h2>

<p>The demo project is an example on how to integrate with Boxcar Push Service on Amazon devices based on Amazon Device Messaging (ADM). It is integrated into the same project structure than the standard Android version (same directory and files) but the <em>AndroidManifest.xml</em> file is dynamically generated by Gradle build framework.</p>

<h3 id="boxcar-sdk-integration-1">Boxcar SDK integration</h3>

<h4 id="setup-your-project-1">Setup your project</h4>
<p>Before setting up your project, please ensure you have:</p>

<ol>
  <li>created an account on Amazon, following the instructions here: <a href="https://developer.amazon.com/sdk/adm/credentials.html">https://developer.amazon.com/sdk/adm/credentials.html</a>
</li>
  <li>set your API Key. On the demo project the API key has a placeholder value on the file <em>src/kindle/assets/api_key.txt</em>. You must set the one generated by you, based on your Amazon account and the signature used to sign your application. All these details are documented on the step 5 of the link above.</li>
  <li>enabled ADM feature on your Amazon account. Read step 6 on the link above.</li>
  <li>ensure each Amazon Kindle device is registered into the Amazon network.</li>
</ol>

<ul>
  <li>
    <p><strong>Step 1</strong>: Create a new Android project. See <a href="#prepare-your-project-to-use-the-boxcar-android-sdk">“Prepare your project to use the Boxcar Android SDK”</a> section for more information.</p>
  </li>
  <li>
    <p><strong>Step 2</strong>: Add ADM permissions to your Android Manifest file. Permissions are specified in XML as children of &lt;manifest&gt; element. In this example our application package (as defined on ‘package’ attribte of &lt;manifest&gt; element) is <em>“io.boxcar.push.demo”</em>:</p>
  </li>
</ul>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="c">&lt;!-- This permission ensures that no other application can intercept your ADM messages. --&gt;</span>
<span class="nt">&lt;permission</span> <span class="na">android:name=</span><span class="s">"io.boxcar.push.demo.permission.RECEIVE_ADM_MESSAGE"</span> <span class="na">android:protectionLevel=</span><span class="s">"signature"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"io.boxcar.push.demo.permission.RECEIVE_ADM_MESSAGE"</span> <span class="nt">/&gt;</span>
<span class="c">&lt;!-- This permission allows your app access to receive push notifications from ADM. --&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"com.amazon.device.messaging.permission.RECEIVE"</span> <span class="nt">/&gt;</span>
<span class="c">&lt;!-- ADM uses WAKE_LOCK to keep the processor from sleeping when a message is received. --&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.WAKE_LOCK"</span> <span class="nt">/&gt;</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>
<strong>Step 3</strong>: Register the ADM service on your Android manifest file. Services are specified in XML as children of &lt;application&gt; element.</li>
</ul>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="nt">&lt;service</span> <span class="na">android:name=</span><span class="s">"io.boxcar.push.ADMIntentService"</span> <span class="na">android:enabled=</span><span class="s">"true"</span> <span class="na">android:exported=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>
<strong>Step 4</strong>: Configure the corresponding received for ADM incoming notifications. Receivers are specified in XML as children of &lt;application&gt; element.</li>
</ul>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="c">&lt;!-- This permission ensures that only ADM can send your app registration broadcasts. --&gt;</span>
<span class="nt">&lt;receiver</span> <span class="na">android:name=</span><span class="s">"io.boxcar.push.ADMReceiver"</span> <span class="na">android:enabled=</span><span class="s">"true"</span> <span class="na">android:permission=</span><span class="s">"com.amazon.device.messaging.permission.SEND"</span> <span class="nt">&gt;</span>
    <span class="c">&lt;!-- To interact with ADM, your app must listen for the following intents. --&gt;</span>
    <span class="nt">&lt;intent-filter&gt;</span>
        <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"com.amazon.device.messaging.intent.REGISTRATION"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"com.amazon.device.messaging.intent.RECEIVE"</span> <span class="nt">/&gt;</span>
        <span class="c">&lt;!-- You must replace the name in the category tag with your app's package name. --&gt;</span>
        <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">"io.boxcar.push.demo"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/intent-filter&gt;</span>
<span class="nt">&lt;/receiver&gt;</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>
<strong>Step 5</strong>: If you expect to use UDID (Universal Device ID), register the service on your Android manifest file. Services are specified in XML as children of &lt;application&gt; element:</li>
</ul>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="nt">&lt;service</span> <span class="na">android:name=</span><span class="s">"org.openudid.android.OpenUDIDService"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;intent-filter&gt;</span>
        <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"org.openudid.android.GETUDID"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/intent-filter&gt;</span>
<span class="nt">&lt;/service&gt;</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>
<strong>Step 6</strong>: You must explicitly enable ADM. To do so, add the following element, specified in XML as children of &lt;application&gt; element.</li>
</ul>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="nt">&lt;amazon:enable-feature</span> <span class="na">android:name=</span><span class="s">"com.amazon.device.messaging"</span> <span class="na">android:required=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
</pre></div>
</td>
</tr></table></code></pre>

<p><strong>Note</strong>: you can see a working example of the <em>AndroidManifest.xml</em> file within the push demos released along with the core SDK library. There is currently a common manifest file for all demos on <em>src/main/AndroidManifest.xml</em> which is then merged by the <em>Gradle</em> build manager with the platform specific parts. For instance, the specific elements for Amazon Kindle are located at <em>src/kindle/AndroidManifest.xml</em>.</p>

<h4 id="source-code-1">Source code</h4>

<p>Source code for the Kindle demo application is the same than the standard Android app explained above.</p>

<p><strong>Important:</strong>* do not include Amazon ADM SDK library into your APK file. This library is already provided by the Amazon environment already. If you include the library in your packaged application you will experience errors during the registration phase. </p>

<h2 id="boxcar-framework-demo-for-nokia-nm-devices">Boxcar Framework Demo for Nokia NM devices</h2>

<p>The Nokia X project is an example on how to integrate with Boxcar Push Service on Nokia NM devices based on Nokia Notification API (NNA).</p>

<h3 id="boxcar-sdk-integration-2">Boxcar SDK integration</h3>

<h4 id="setup-your-project-2">Setup your project</h4>
<p>Before setting up your project, please ensure you have:</p>

<ol>
  <li>
    <p>created a Nokia Developer Account to define the senderId for your project and get the API Key generated by Notifications API Developer Console.</p>
  </li>
  <li>
    <p>set your senderId on <em>src/nokia/res/values/config.xml</em>.</p>
  </li>
</ol>

<ul>
  <li>
<strong>Step 1</strong>: Create a new Android project. See <a href="#prepare-your-project-to-use-the-boxcar-android-sdk">“Prepare your project to use the Boxcar Android SDK”</a> section for more information.</li>
  <li>
<strong>Step 2</strong>: Add Nokia permissions to your Android Manifest file. Permissions are specified in XML as children of &lt;manifest&gt; element. In this example our application package (as defined on ‘package’ attribte of &lt;manifest&gt; element) is <em>“io.boxcar.push.demo”</em>:</li>
</ul>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="nt">&lt;permission</span> <span class="na">android:name=</span><span class="s">"io.boxcar.push.demo.permission.C2D_MESSAGE"</span> <span class="na">android:protectionLevel=</span><span class="s">"signature"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"io.boxcar.push.demo.permission.C2D_MESSAGE"</span> <span class="nt">/&gt;</span>
<span class="c">&lt;!-- This permission allows your app access to receive push notifications from Nokia Notifications. --&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"com.nokia.pushnotifications.permission.RECEIVE"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.WAKE_LOCK"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.INTERNET"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.GET_ACCOUNTS"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.VIBRATE"</span> <span class="nt">/&gt;</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>
<strong>Step 3</strong>: Register the Nokia NNA service on your Android manifest file. Services are specified in XML as children of &lt;application&gt; element.</li>
</ul>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="nt">&lt;service</span> <span class="na">android:name=</span><span class="s">"io.boxcar.push.NNAIntentService"</span> <span class="na">android:enabled=</span><span class="s">"true"</span> <span class="na">android:exported=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>
<strong>Step 4</strong>: Configure the corresponding received for NNA incoming notifications. Receivers are specified in XML as children of &lt;application&gt; element.</li>
</ul>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="nt">&lt;receiver</span> <span class="na">android:name=</span><span class="s">"io.boxcar.push.NNAReceiver"</span> <span class="na">android:enabled=</span><span class="s">"true"</span> <span class="na">android:permission=</span><span class="s">"com.nokia.pushnotifications.permission.SEND"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;intent-filter&gt;</span>
        <span class="c">&lt;!-- Receives the actual messages. --&gt;</span>
        <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"com.nokia.pushnotifications.intent.RECEIVE"</span> <span class="nt">/&gt;</span>
        <span class="c">&lt;!-- Receives the registration id. --&gt;</span>
        <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"com.nokia.pushnotifications.intent.REGISTRATION"</span> <span class="nt">/&gt;</span>
        <span class="c">&lt;!-- You must replace the name in the category tag with your app's package name. --&gt;</span>
        <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">"io.boxcar.push.demo"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/intent-filter&gt;</span>
<span class="nt">&lt;/receiver&gt;</span>
</pre></div>
</td>
</tr></table></code></pre>

<ul>
  <li>
<strong>Step 5</strong>: If you expect to use UDID (Universal Device ID), register the service on your Android manifest file. Services are specified in XML as children of &lt;application&gt; element:</li>
</ul>

<pre><code class="language-xml"><table class="highlighttable"><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td>
<td class="code">
<div class="highlight"><pre><span class="nt">&lt;service</span> <span class="na">android:name=</span><span class="s">"org.openudid.android.OpenUDIDService"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;intent-filter&gt;</span>
        <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"org.openudid.android.GETUDID"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/intent-filter&gt;</span>
<span class="nt">&lt;/service&gt;</span>
</pre></div>
</td>
</tr></table></code></pre>

<p><strong>Note</strong>: you can see a working example of the <em>AndroidManifest.xml</em> file within the push demos released along with the core SDK library. There is currently a common manifest file for all demos on <em>src/main/AndroidManifest.xml</em> which is then merged by the <em>Gradle</em> build manager with the platform specific parts. For instance, the specific elements for Nokia X are located at <em>src/nokia/AndroidManifest.xml</em>.</p>

<h4 id="source-code-2">Source code</h4>

<p>Source code for the Nokia demo application is the same than the standard Android app explained above.</p>


            
            <div id="disqus_thread"></div>
        </div>
    </div>
</div><!-- #wrapper -->

<div id="footer-wrapper">
    <div id="footer" class="container-fluid">
        <div class="row">
            <div class="col-md-7">
                <ul class="sitemap">
                    <li><a href="#">Section</a></li>
                    <li><a href="#">Element</a></li>
                    <li><a href="#">Element</a></li>
                </ul>
                
                <ul class="sitemap">
                    <li><a href="#">Section</a></li>
                    <li><a href="#">Element</a></li>
                    <li><a href="#">Element</a></li>
                </ul>
                
                <ul class="sitemap">
                    <li><a href="#">Section</a></li>
                    <li><a href="#">Element</a></li>
                    <li><a href="#">Element</a></li>
                </ul>
            </div>
            <div class="col-md-5 text-right">
                <a href="http://ejabberd.im" id="logo-footer">ejabberd.im</a>
                <br /><br />
                &copy; 2014-2015 <a href="#">ProcessOne</a>
            </div>
        </div>
    </div>
</div><!-- /#footer -->

<script src="/shared/js/jquery.js" type="text/javascript"></script>
<script src="/shared/js/documentation.js" type="text/javascript"></script>

<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  if (!$('body').hasClass('nocomment')) {
    var disqus_shortname = 'developerboxcario';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  }
</script>

<script>
  // Include the UserVoice JavaScript SDK (only needed once on a page)
  UserVoice=window.UserVoice||[];(function(){var uv=document.createElement('script');uv.type='text/javascript';uv.async=true;uv.src='//widget.uservoice.com/Z2g8b0cwtaG7oeunGhyDHw.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(uv,s)})();
  
  UserVoice.push(['set', {
    accent_color: '#e23a39',
    trigger_color: 'white',
    trigger_background_color: '#e23a39'
  }]);
  
  // Add default trigger to the bottom-right corner of the window:
  UserVoice.push(['addTrigger', { mode: 'contact', trigger_position: 'bottom-right' }]);
</script>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-137362-14', 'boxcar.io');
    ga('send', 'pageview');
</script>
</body>
</html>
